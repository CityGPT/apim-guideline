# 4.標準方法

標準方法可以減少複雜度並增加一致性。

## 與實體數據關聯 API

### 標準視圖(ABC)

標準視圖為定義對於資源操作時的視角，可以由名稱推測出使用這個視圖進行資源操作時，預期中的行爲反應。您`應該`遵循以下的定義，來規劃資源存取的存取方法。標準視圖分為三大類，分別為：

- All (Entity)

  All 代表使用這個方法進行資源的存取時，進行操作的是這個資源主體的完整內容。同樣的，利用同樣的視圖進行查詢作業時，預期得到的也會是對應資源的完整內容。

- Basic

  All 代表使用這個方法進行資源的存取時，進行操作的是這個資源主體的部分內容。對於資源主體的外部關聯性，都將以 Key-Value 的形式進行表示。

- Custom (Extended)

  Custom 是客製化的視圖，當對於這個資源的存取，有客製化的邏輯或是資料結構產生時，可以使用 Custom 的視圖進行規劃。而當使用客製化的方式時，視圖的命名不限於使用 Custom 或是 Extended，可以依照實際的作用進行命名的規劃。但您`應該`使用一個易於理解意圖的名稱來作為命名的原則。

### QCRU

| 動詞   | 類型     | Memo                 |
| ------ | -------- | -------------------- |
| Get    | Basic    | 列舉所有資料         |
| Get    | Basic    | 取得特定資料         |
| Post   | Basic    | 新增資料             |
| Patch  | Basic    | 局部更新現有資料     |
| Put    | Basic    | 完整更新現有資料     |
| Get    | Entity   | 取得資料完整內容     |
| Get    | Entity   | 取得特定資料完整內容 |
| Post   | Entity   | 新建完整資料         |
| Patch  | Entity   | 局部更新資料內容     |
| Put    | Entity   | 完整更新現有資料     |
| Delete | Entity   | 刪除資料             |
| Get    | Extended | 取得關聯資料         |
| Delete | Extended | 刪除關聯資料         |

操作 API 的基本方法，查詢、建立、讀取、更新。

### 多語言

API 底層已實現對特定欄位的多語言結構支援。當需要處理某些欄位的多語言需求時，您**應該**在模型設計階段引入底層的多語言結構，這包括建立相應的多語言表格及相關的資料關聯。

### 多租戶

多個租戶（Tenant）可以使用並共享資源，而這些租戶之間相互獨立、彼此隔離。每個租戶通常是一個組織、一個公司、或一個使用者群體，他們擁有自己的資料、設定和定制。

API 底層已實現對特定欄位的多租戶結構支援。當需要處理某些欄位的多租戶需求時，您**應該**在模型設計階段引入底層的多租戶結構，這包括建立相應的多租戶表格及相關的資料關聯。

### 基本查詢條件

API 底層已經支援的基本查詢條件如下：

1. **分頁支援：**
   - **`pageIndex`** 屬性：指定查詢結果的頁碼，從 1 起算。
   - **`pageRows`** 屬性：指定每頁的筆數，控制每次查詢返回的資料量。
2. **排序支援：**
   - **`OrderBy`** 屬性：用於指定排序條件，支援多個欄位，並且可以指定升冪或降冪排序。
3. **多語言支援：**
   - **`LangCode`** 屬性：用於指定查詢結果的語系代碼，以確保返回的資料符合指定的語言。
4. **跨語言查詢：**
   - **`CheckIsCrossLanguage`** 方法：用於確認是否設定了 **`IsCrossLanguage`** 為 **`true`**，支援跨語言查詢。

### 子查詢支援

當 API 的查詢取得了某些主表格的實體數據時，另外也提供相對應子查詢的 API。

例：

​ 主查詢：取得某使用者的基礎內容，

​ GET /api/Basic/usr/{id}

​ 子查詢：取得某使用者的對話訊息，

​ GET /api/Extended/usr/{id}/UserMessages

### 狀態變更

狀態變更 API 功能旨在允許用戶根據資源的可變狀態執行不同的操作，例如標記資料是否已刪除，或者設置自訂的狀態，如審核中、已審核、退件等。

API 底層已實現對特定資料的狀態變更支援。當需要處理某些資料的多租戶需求時，您**應該**在模型設計階段引入底層的狀態變更結構，這包括建立相應的狀態變更表格及相關的資料關聯。

### D 刪除

刪除功能的 API 允許用戶立即刪除特定資源並且無法恢復。
